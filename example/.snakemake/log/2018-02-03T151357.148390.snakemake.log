Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 1
Rules claiming more threads will be scaled down.
Job counts:
	count	jobs
	1	all
	1	annotate
	1	samtools_merge_bam
	1	samtools_rmdup
	1	snp_indel_calling
	5

Job 4: ################ merge bam from lanes ###############
Reason: Missing output files: mapping/KPGP-00001/KPGP-00001.sort.merge.bam


        LANE_NUM=3
        if [[ $LANE_NUM -gt 1 ]];
        then 
            samtools merge -l 9 -@ 1 -h mapping/KPGP-00001/KPGP-00001_L2.bam.sort mapping/KPGP-00001/KPGP-00001.sort.merge.bam mapping/KPGP-00001/KPGP-00001_L2.bam.sort mapping/KPGP-00001/KPGP-00001_L3.bam.sort mapping/KPGP-00001/KPGP-00001_L4.bam.sort 2>log/KPGP-00001_samtools_merge_bam.log"
        else
            mv mapping/KPGP-00001/KPGP-00001_L2.bam.sort mapping/KPGP-00001/KPGP-00001_L3.bam.sort mapping/KPGP-00001/KPGP-00001_L4.bam.sort mapping/KPGP-00001/KPGP-00001.sort.merge.bam
        fi
        
Error in rule samtools_merge_bam:
    jobid: 4
    output: mapping/KPGP-00001/KPGP-00001.sort.merge.bam
    log: log/KPGP-00001_samtools_merge_bam.log

RuleException:
CalledProcessError in line 65 of /home/sxuan/mypipe/example/wgs.py:
Command ' set -euo pipefail;  
        LANE_NUM=3
        if [[ $LANE_NUM -gt 1 ]];
        then 
            samtools merge -l 9 -@ 1 -h mapping/KPGP-00001/KPGP-00001_L2.bam.sort mapping/KPGP-00001/KPGP-00001.sort.merge.bam mapping/KPGP-00001/KPGP-00001_L2.bam.sort mapping/KPGP-00001/KPGP-00001_L3.bam.sort mapping/KPGP-00001/KPGP-00001_L4.bam.sort 2>log/KPGP-00001_samtools_merge_bam.log"
        else
            mv mapping/KPGP-00001/KPGP-00001_L2.bam.sort mapping/KPGP-00001/KPGP-00001_L3.bam.sort mapping/KPGP-00001/KPGP-00001_L4.bam.sort mapping/KPGP-00001/KPGP-00001.sort.merge.bam
        fi ' returned non-zero exit status 2.
  File "/home/sxuan/mypipe/example/wgs.py", line 65, in __rule_samtools_merge_bam
  File "/opt/anaconda/lib/python3.6/concurrent/futures/thread.py", line 55, in run
Will exit after finishing currently running jobs.
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: /home/sxuan/mypipe/example/.snakemake/log/2018-02-03T151357.148390.snakemake.log
